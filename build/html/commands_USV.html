<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Operating the Marine X &mdash; USV Documentation 0.0.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Instructions to operate Marine X" href="Running_USV.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            USV Documentation
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="CAD_Design.html">USV CAD Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="Software_architecture.html">USV Hardware and Software Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="Examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="Running_USV.html">Instructions to operate Marine X</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Operating the Marine X</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#connecting-to-the-raspberry-and-tx2">Connecting to the Raspberry and TX2:</a></li>
<li class="toctree-l2"><a class="reference internal" href="#access-remote-control">Access Remote Control</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ssh-to-the-navio-password-raspberry">1. SSH to the Navio <code class="docutils literal notranslate"><span class="pre">password:</span> <span class="pre">raspberry</span></code>:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#modify-the-ros-master-and-input-your-ip-address">2. Modify the ROS master and input your IP address:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#run-the-usv-firmware">3. Run the USV firmware</a></li>
<li class="toctree-l3"><a class="reference internal" href="#calibrate-the-rc-controller">4. Calibrate the RC controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="#activate-the-arm-usv">5. Activate the arm_usv</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#access-the-camera-through-tx2">Access the camera through TX2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ssh-to-the-tx2-password-mbzirc">1. SSH to the TX2 <code class="docutils literal notranslate"><span class="pre">password:</span> <span class="pre">mbzirc</span></code>:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id1">2. Modify the ROS master and input your IP address:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lanuch-the-camera">3. Lanuch the camera:</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#detection-and-autonomous-navigation">Detection and autonomous navigation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#run-the-detection-commands-in-tx2">1. Run the detection commands in TX2:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#autonomous-maneuvering">2. Autonomous maneuvering</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">USV Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Operating the Marine X</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/commands_USV.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="operating-the-marine-x">
<h1>Operating the Marine X<a class="headerlink" href="#operating-the-marine-x" title="Permalink to this heading"></a></h1>
<p>This guide provides a detailed overview of the terminal commands required to operate the Marine X Unmanned Surface Vessel (USV).</p>
<section id="connecting-to-the-raspberry-and-tx2">
<h2>Connecting to the Raspberry and TX2:<a class="headerlink" href="#connecting-to-the-raspberry-and-tx2" title="Permalink to this heading"></a></h2>
<blockquote>
<div><ol class="arabic simple">
<li><p>Ensure the USV is powered on.</p></li>
<li><dl class="simple">
<dt>Connect to the ASUS router (KU_pool_c00058):</dt><dd><ul class="simple">
<li><p>Access the router administration page: <a class="reference external" href="http://router.asus.com/Main_Login.asp">http://router.asus.com/Main_Login.asp</a></p></li>
<li><p>Input the following credentials: username: admin &amp; password: KU_Marine_X</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>You can now view the IP addresses of both the Raspberry Pi and TX2 by clicking on the view list.</p></li>
<li><p>Open a terminal and type <code class="docutils literal notranslate"><span class="pre">roscore</span></code></p></li>
</ol>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The IPs for both are statics however check the client IP just in case</p>
</div>
<img alt="_images/client_ip.png" src="_images/client_ip.png" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The TX2 is labeled as <code class="docutils literal notranslate"><span class="pre">mbzirc-humais</span></code> while the Raspberry Pi with the Navio2 is named <code class="docutils literal notranslate"><span class="pre">navio</span></code>.</p>
</div>
</section>
<section id="access-remote-control">
<h2>Access Remote Control<a class="headerlink" href="#access-remote-control" title="Permalink to this heading"></a></h2>
<section id="ssh-to-the-navio-password-raspberry">
<h3>1. SSH to the Navio <code class="docutils literal notranslate"><span class="pre">password:</span> <span class="pre">raspberry</span></code>:<a class="headerlink" href="#ssh-to-the-navio-password-raspberry" title="Permalink to this heading"></a></h3>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>ssh<span class="w"> </span>pi@192.168.50.145
</pre></div>
</div>
</section>
<section id="modify-the-ros-master-and-input-your-ip-address">
<h3>2. Modify the ROS master and input your IP address:<a class="headerlink" href="#modify-the-ros-master-and-input-your-ip-address" title="Permalink to this heading"></a></h3>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>nano<span class="w"> </span>.bashrc
</pre></div>
</div>
<img alt="_images/ROS_Master.png" src="_images/ROS_Master.png" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Only change the ROS_MASTER_URI while keeping the port address (.11311).</p>
</div>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span><span class="w"> </span>.bashrc
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>At this stage, you should already have a terminal running <code class="docutils literal notranslate"><span class="pre">roscore</span></code></p>
</div>
</section>
<section id="run-the-usv-firmware">
<h3>3. Run the USV firmware<a class="headerlink" href="#run-the-usv-firmware" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ul class="simple">
<li><p>Turn on futaba RC controller on and make sure the left knob is inialized by being all the way down</p></li>
<li><p>source the package then run the firmware:</p></li>
</ul>
<blockquote>
<div><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span><span class="w"> </span>catkin_ws/devel/setup.bash
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
<p>Run the firmware:</p>
<blockquote>
<div><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>rosrun<span class="w"> </span>usv_firmware<span class="w"> </span>usv_node
</pre></div>
</div>
</div></blockquote>
<img alt="_images/RC_firmware.png" src="_images/RC_firmware.png" />
</section>
<section id="calibrate-the-rc-controller">
<h3>4. Calibrate the RC controller<a class="headerlink" href="#calibrate-the-rc-controller" title="Permalink to this heading"></a></h3>
<blockquote>
<div><ul class="simple">
<li><p>Open new terminal</p></li>
</ul>
</div></blockquote>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>rosservice<span class="w"> </span>call<span class="w"> </span>/calibrate_rc<span class="w"> </span><span class="s2">&quot;data: true&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Move the right knob in a circule</p>
</div>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>rosservice<span class="w"> </span>call<span class="w"> </span>/calibrate_rc<span class="w"> </span><span class="s2">&quot;data: false&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The USV_firmware terminal should display a “calibration successful” message.</p>
</div>
<img alt="_images/calibration.png" src="_images/calibration.png" />
</section>
<section id="activate-the-arm-usv">
<h3>5. Activate the arm_usv<a class="headerlink" href="#activate-the-arm-usv" title="Permalink to this heading"></a></h3>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>rosservice<span class="w"> </span>call<span class="w"> </span>/arm_usv<span class="w"> </span><span class="s2">&quot;data: true&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The USV_firmware terminal should display an “arm called” message, allowing you to control the thrusters with the RC.</p>
</div>
</section>
</section>
<section id="access-the-camera-through-tx2">
<h2>Access the camera through TX2<a class="headerlink" href="#access-the-camera-through-tx2" title="Permalink to this heading"></a></h2>
<section id="ssh-to-the-tx2-password-mbzirc">
<h3>1. SSH to the TX2 <code class="docutils literal notranslate"><span class="pre">password:</span> <span class="pre">mbzirc</span></code>:<a class="headerlink" href="#ssh-to-the-tx2-password-mbzirc" title="Permalink to this heading"></a></h3>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>ssh<span class="w"> </span>mbzirc-usv@192.168.50.38
</pre></div>
</div>
</section>
<section id="id1">
<h3>2. Modify the ROS master and input your IP address:<a class="headerlink" href="#id1" title="Permalink to this heading"></a></h3>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>nano<span class="w"> </span>.bashrc
</pre></div>
</div>
<img alt="_images/ROS_MASTER_TX2.png" src="_images/ROS_MASTER_TX2.png" />
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span><span class="w"> </span>.bashrc
</pre></div>
</div>
</section>
<section id="lanuch-the-camera">
<h3>3. Lanuch the camera:<a class="headerlink" href="#lanuch-the-camera" title="Permalink to this heading"></a></h3>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>roslaunch<span class="w"> </span>zed_wrapper<span class="w"> </span>zedm.launch
</pre></div>
</div>
<p>Open a new terminal and execute the following command:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>rqt
</pre></div>
</div>
<img alt="_images/camera_output.png" src="_images/camera_output.png" />
</section>
</section>
<section id="detection-and-autonomous-navigation">
<h2>Detection and autonomous navigation<a class="headerlink" href="#detection-and-autonomous-navigation" title="Permalink to this heading"></a></h2>
<section id="run-the-detection-commands-in-tx2">
<h3>1. Run the detection commands in TX2:<a class="headerlink" href="#run-the-detection-commands-in-tx2" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>You must have two TX2 terminals (so SHH twice)</p></li>
</ul>
<p>Lanuch the camera node:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>roslaunch<span class="w"> </span>zed_wrapper<span class="w"> </span>zed_camera_nodelet.launch<span class="w"> </span>node_name:<span class="o">=</span>zed_node
</pre></div>
</div>
<p>Launch the detection node:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>roslaunch<span class="w"> </span>mbz_vessel_det<span class="w"> </span>mbz_detection.launch<span class="w"> </span>camera_model:<span class="o">=</span>zedm
</pre></div>
</div>
<p>The following warnings indicate that the nodes are working proparly:</p>
<img alt="_images/detection_works.png" src="_images/detection_works.png" />
<p>Open new terminal and check the output:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>rqt
</pre></div>
</div>
<img alt="_images/boat_detection.png" src="_images/boat_detection.png" />
</section>
<section id="autonomous-maneuvering">
<h3>2. Autonomous maneuvering<a class="headerlink" href="#autonomous-maneuvering" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>ssh to the Navio and execute the following command</p></li>
</ul>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>rosrun<span class="w"> </span>usv_nav<span class="w"> </span>usv_nav_node
</pre></div>
</div>
<ul class="simple">
<li><p>In another terminal you have to enable the Autonomous service:</p></li>
</ul>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>rosservice<span class="w"> </span>call<span class="w"> </span>/enable_auto<span class="w"> </span><span class="s2">&quot;data: true&quot;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Initiate the autonomous system:</p></li>
</ul>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>rosservice<span class="w"> </span>call<span class="w"> </span>/reset_manual_override<span class="w"> </span><span class="s2">&quot;{}&quot;</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Before initiating the autonomous service you have to access to the RC controller. This precaution ensures that you can swiftly switch to manual control if necessary, in order to prevent potential collisions or damage.</p>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Running_USV.html" class="btn btn-neutral float-left" title="Instructions to operate Marine X" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Muhayyuddin, Abdelrahman Alblooshi.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>